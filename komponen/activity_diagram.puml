@startuml Activity Diagram Sistem Manajemen Jamaah Haji

title Activity Diagram Sistem Manajemen Jamaah Haji

start

:User/Admin mengakses halaman login;

if (Login sebagai Admin?) then (Ya)
    :Masukkan email dan password;
    :Kirim ke proses_login.php;
    :Validasi dengan tabel admin;
    if (Login berhasil?) then (Ya)
        :Set session role='admin';
        :Redirect ke sideMenu.php;
        :Tampilkan dashboard admin;
        if (Pilih menu?) then (Dashboard)
            :Tampilkan statistik jamaah, pembimbing, berita;
        elseif (Kelola Jamaah)
            :Pilih tahun (2026-2029);
            :Tampilkan list jamaah;
            if (Tambah Jamaah?) then (Ya)
                :Isi form jamaah;
                :Upload foto (opsional);
                :Validasi pembimbing (<20 jamaah);
                :Validasi total jamaah (<50);
                :Simpan ke database;
                :Redirect ke list jamaah;
            elseif (Edit Jamaah?) then (Ya)
                :Pilih jamaah;
                :Update data;
                :Simpan perubahan;
            elseif (Hapus Jamaah?) then (Ya)
                :Konfirmasi hapus;
                :Hapus dari database;
            elseif (Lihat Detail?) then (Ya)
                :Tampilkan detail jamaah;
            endif
        elseif (Kelola Pembimbing)
            :Tampilkan list pembimbing;
            if (Tambah Pembimbing?) then (Ya)
                :Isi form pembimbing;
                :Upload foto (opsional);
                :Simpan ke database;
                :Redirect ke list pembimbing;
            elseif (Edit Pembimbing?) then (Ya)
                :Pilih pembimbing;
                :Update data;
                :Simpan perubahan;
            elseif (Hapus Pembimbing?) then (Ya)
                :Konfirmasi hapus;
                :Hapus dari database;
            elseif (Lihat Detail?) then (Ya)
                :Tampilkan detail pembimbing;
            endif
        elseif (Kelola Berita)
            :Tampilkan list berita;
            if (Tambah Berita?) then (Ya)
                :Isi form berita;
                :Upload gambar (opsional);
                :Simpan ke database;
                :Redirect ke list berita;
            elseif (Edit Berita?) then (Ya)
                :Pilih berita;
                :Update data;
                :Simpan perubahan;
            elseif (Hapus Berita?) then (Ya)
                :Konfirmasi hapus;
                :Hapus dari database;
            elseif (Lihat Detail?) then (Ya)
                :Tampilkan detail berita;
            endif
        elseif (Laporan)
            :Pilih jenis laporan;
            :Generate laporan (PDF);
            :Download laporan;
        elseif (Tambah Admin)
            :Isi form admin;
            :Hash password;
            :Simpan ke database;
        elseif (Logout)
            :Destroy session;
            :Redirect ke login;
        endif
    else (Tidak)
        :Tampilkan pesan error;
        :Kembali ke login;
    endif
else (Tidak - Login sebagai Pengguna)
    :Masukkan email dan password;
    :Kirim ke proses_login.php;
    :Validasi dengan tabel pengguna;
    if (Login berhasil?) then (Ya)
        :Set session role='user';
        :Redirect ke sideMenu2.php;
        :Tampilkan dashboard pengguna;
        if (Pilih menu?) then (Home)
            :Tampilkan informasi umum;
        elseif (Profil)
            :Tampilkan data profil;
            if (Edit Profil?) then (Ya)
                :Update data profil;
                :Simpan perubahan;
            elseif (Ubah Password?) then (Ya)
                :Masukkan password lama & baru;
                :Validasi dan update;
            endif
        elseif (Tour Guide)
            :Tampilkan list pembimbing;
            :Lihat detail pembimbing;
        elseif (Berita)
            :Tampilkan list berita;
            :Lihat detail berita;
        elseif (Cara Daftar Haji)
            :Tampilkan panduan pendaftaran;
        elseif (Jamaah)
            :Pilih tahun (2026-2029);
            :Tampilkan list jamaah tahun tersebut;
            :Lihat detail jamaah;
        elseif (Logout)
            :Destroy session;
            :Redirect ke login;
        endif
    else (Tidak)
        :Tampilkan pesan error;
        :Kembali ke login;
    endif
endif

if (Belum punya akun? (untuk pengguna)) then (Ya)
    :Klik link daftar;
    :Akses daftar.php;
    :Isi form registrasi;
    :Validasi input;
    :Cek email unik;
    :Hash password;
    :Simpan ke tabel pengguna;
    :Redirect ke login dengan pesan sukses;
endif

stop

@enduml
