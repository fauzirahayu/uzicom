@startuml
title Diagram Aktivitas Sistem Manajemen Haji - Swimlane Vertical

scale 1.5
skinparam swimlaneWidth 300
skinparam activityFontSize 18
skinparam activityHeight 25
skinparam activityWidth 180
skinparam swimlaneTitleFontSize 20
skinparam titleFontSize 24

|Pengguna|
|Admin|
|Sistem|

start

|Pengguna|
:Masuk ke halaman login;
if (Login sebagai Admin?) then (Ya)
    :Masukkan email dan password;
    |Sistem|
    :Validasi login admin;
    if (Berhasil?) then (Ya)
        :Set session admin;
        :Redirect ke dashboard admin;
        |Admin|
        :Tampilkan menu utama;
        if (Pilih Home/Dashboard?) then (Ya)
            :Tampilkan statistik;
            if (Lihat Jamaah?) then (Ya)
                :Pilih tahun (2026-2029);
                :Tampilkan list jamaah;
            endif
        elseif (Pilih Tambah Admin?) then (Ya)
            :Isi form admin;
            |Sistem|
            :Simpan admin baru;
        elseif (Pilih Kelola Akun Admin?) then (Ya)
            :Tampilkan list admin;
            if (Edit/Hapus?) then (Ya)
                :Pilih admin;
                :Update/Hapus data;
                |Sistem|
                :Proses perubahan;
            endif
        elseif (Pilih Kelola Jamaah?) then (Ya)
            :Pilih tahun;
            :Tampilkan list jamaah;
            if (Tambah?) then (Ya)
                :Isi form jamaah;
                |Sistem|
                :Validasi & simpan;
            elseif (Edit?) then (Ya)
                :Update jamaah;
                |Sistem|
                :Simpan perubahan;
            elseif (Hapus?) then (Ya)
                :Konfirmasi hapus;
                |Sistem|
                :Hapus data;
            elseif (Detail?) then (Ya)
                :Tampilkan detail;
            endif
        elseif (Pilih Tour Guide?) then (Ya)
            :Tampilkan list pembimbing;
            if (CRUD Pembimbing?) then (Ya)
                :Tambah/Edit/Hapus pembimbing;
                |Sistem|
                :Proses;
            endif
        elseif (Pilih Berita?) then (Ya)
            :Tampilkan list berita;
            if (CRUD Berita?) then (Ya)
                :Tambah/Edit/Hapus berita;
                |Sistem|
                :Proses;
            endif
        elseif (Pilih Panduan?) then (Ya)
            :Tampilkan cara daftar haji;
        elseif (Pilih Laporan?) then (Ya)
            :Pilih laporan;
            |Sistem|
            :Generate & download;
        elseif (Pilih Logout?) then (Ya)
            |Sistem|
            :Logout;
        endif
    else (Tidak)
        :Error login;
        |Pengguna|
        :Kembali ke login;
    endif
else (Login sebagai Pengguna)
    :Masukkan email dan password;
    |Sistem|
    :Validasi login pengguna;
    if (Berhasil?) then (Ya)
        :Set session user;
        :Redirect ke dashboard user;
        |Pengguna|
        :Tampilkan menu;
        switch (Pilih Menu)
        case (Home)
            :Tampilkan info umum;
            if (Lihat Jamaah?) then (Ya)
                :Pilih tahun;
                :Tampilkan list jamaah;
            endif
        case (Profil)
            :Tampilkan profil;
            if (Edit?) then (Ya)
                :Update profil/password;
                |Sistem|
                :Simpan;
            endif
        case (Tour Guide)
            :Tampilkan pembimbing;
        case (Berita)
            :Tampilkan berita;
        case (Panduan)
            :Tampilkan cara daftar;
        case (Logout)
            |Sistem|
            :Logout;
        endswitch
    else (Tidak)
        :Error login;
        :Kembali ke login;
    endif
endif

if (Belum punya akun?) then (Ya)
    |Pengguna|
    :Klik daftar;
    :Isi form registrasi;
    |Sistem|
    :Validasi & simpan;
    :Redirect ke login;
endif

stop

@enduml
