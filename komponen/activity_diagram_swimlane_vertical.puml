@startuml
title Diagram Aktivitas Sistem Manajemen Haji - Swimlane Vertical

scale 1.5
skinparam swimlaneWidth 300
skinparam activityFontSize 18
skinparam activityHeight 25
skinparam activityWidth 180
skinparam swimlaneTitleFontSize 20
skinparam titleFontSize 24

|Pengguna|
|Admin|
|Sistem|

start

|Pengguna|
:Masuk ke halaman login;
if (Pilih akun?) then (Admin)
    :Masukkan email dan password;
    |Sistem|
    :Validasi login admin;
    if (Berhasil?) then (Ya)
        :Set session admin;
        :Redirect ke dashboard admin;
        |Admin|
        :Tampilkan menu utama;
        if (Pilih menu?) then (Dashboard)
            :Tampilkan statistik;
        elseif (Kelola Jamaah) then
            :Pilih tahun (2026-2029);
            :Tampilkan list jamaah;
            if (Aksi?) then (Tambah)
                :Isi form jamaah;
                |Sistem|
                :Validasi & simpan;
            elseif (Edit) then
                :Update jamaah;
                |Sistem|
                :Simpan perubahan;
            elseif (Hapus) then
                :Konfirmasi hapus;
                |Sistem|
                :Hapus data;
            elseif (Lihat Detail) then
                :Tampilkan detail;
            endif
        elseif (Kelola Pembimbing) then
            :Tampilkan list pembimbing;
            if (Aksi?) then (Tambah)
                :Isi form pembimbing;
                |Sistem|
                :Simpan pembimbing;
            elseif (Edit) then
                :Update pembimbing;
                |Sistem|
                :Simpan perubahan;
            elseif (Hapus) then
                :Hapus pembimbing;
                |Sistem|
                :Proses hapus;
            endif
        elseif (Kelola Akun Admin) then
            :Tampilkan list admin;
            if (Aksi?) then (Tambah)
                :Isi form admin;
                |Sistem|
                :Simpan admin baru;
            elseif (Edit) then
                :Update admin;
                |Sistem|
                :Simpan perubahan;
            elseif (Hapus) then
                :Hapus admin;
                |Sistem|
                :Proses hapus;
            endif
        elseif (Kelola Berita) then
            :Tampilkan list berita;
            if (Aksi?) then (Tambah)
                :Isi form berita;
                |Sistem|
                :Simpan berita;
            elseif (Edit) then
                :Update berita;
                |Sistem|
                :Simpan perubahan;
            elseif (Hapus) then
                :Hapus berita;
                |Sistem|
                :Proses hapus;
            endif
        elseif (Generate Laporan) then
            |Sistem|
            :Generate laporan;
            :Download file;
        elseif (Generate Bukti Booking) then
            |Sistem|
            :Generate bukti booking;
            :Download PDF;
        elseif (Logout) then
            |Sistem|
            :Logout session;
        endif
    else (Tidak)
        :Tampilkan error;
        |Pengguna|
        :Kembali ke login;
    endif
else (Pengguna)
    :Masukkan email dan password;
    |Sistem|
    :Validasi login pengguna;
    if (Berhasil?) then (Ya)
        :Set session user;
        :Redirect ke dashboard user;
        |Pengguna|
        :Tampilkan menu;
        switch (Pilih Menu)
        case (Home)
            :Tampilkan info umum;
            if (Lihat Jamaah?) then (Ya)
                :Tampilkan list jamaah;
            endif
        case (Profil)
            :Tampilkan profil pengguna;
            if (Edit?) then (Ya)
                :Update profil;
                |Sistem|
                :Simpan profil;
            endif
        case (Ubah Password)
            if (Edit?) then (Ya)
                :Update password;
                |Sistem|
                :Simpan password;
            endif
        case (Tour Guide)
            :Tampilkan pembimbing;
        case (Berita)
            :Tampilkan berita;
        case (Gimana Cara Daftar Haji?)
            :Tampilkan panduan daftar;
        case (Status)
            :Tampilkan status pendaftaran;
        case (Logout)
            |Sistem|
            :Logout;
        endswitch
    else (Tidak)
        :Tampilkan error;
        :Kembali ke login;
    endif
endif

if (Belum punya akun?) then (Ya)
    |Pengguna|
    :Klik daftar;
    :Isi form registrasi;
    |Sistem|
    :Validasi & simpan;
    :Redirect ke login;
else (Tidak)
endif

stop

@enduml
