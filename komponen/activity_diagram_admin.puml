@startuml
title Diagram Aktivitas Admin - Sistem Manajemen Haji

scale 1.5
skinparam swimlaneWidth 250
skinparam activityFontSize 12
skinparam activityHeight 20
skinparam activityWidth 150
skinparam swimlaneTitleFontSize 16
skinparam titleFontSize 18

|Admin|
|Sistem|
|Database|

start

|Admin|
:Masuk ke halaman login (index.php);
:Masukkan email dan password;
|Sistem|
:Validasi login (proses_login.php);
|Database|
:Ambil data admin;
|Sistem|
:Periksa kredensial;
if (Login berhasil?) then (Ya)
    :Set session admin;
    :Redirect ke dashboard admin (contern/dasboard/index.php);
    |Admin|
    :Tampilkan menu utama;
    switch (Pilih Menu)
    case (Dashboard)
        :Tampilkan statistik jamaah per tahun;
        |Sistem|
        :Ambil data statistik;
        |Database|
        :Return data jamaah;
    case (Kelola Jamaah)
        :Pilih tahun (2026-2029);
        :Tampilkan list jamaah (jamaah.php, jamaah2027.php, dll);
        |Sistem|
        :Ambil data jamaah;
        |Database|
        :Return data jamaah;
        if (Aksi?) then (Tambah)
            :Isi form tambah jamaah (tambahJamaah2027.php, dll);
            |Sistem|
            :Validasi input;
            :Simpan data (addJamaahWithPembimbing.php);
            |Database|
            :Insert data jamaah;
        elseif (Edit) then
            :Update jamaah (editJamaah.php, dll);
            |Sistem|
            :Validasi & update (updateJamaah.php, dll);
            |Database|
            :Update data jamaah;
        elseif (Hapus) then
            :Konfirmasi hapus;
            |Sistem|
            :Hapus data (hapus.php, dll);
            |Database|
            :Delete data jamaah;
        elseif (Lihat Detail) then
            :Tampilkan detail jamaah (detailJamaah.php);
            |Sistem|
            :Ambil detail jamaah;
            |Database|
            :Return detail jamaah;
        elseif (Cari) then
            :Input nama/NIK;
            |Sistem|
            :Filter data;
            |Database|
            :Return hasil pencarian;
        endif
    case (Kelola Pembimbing)
        :Tampilkan list pembimbing (pembimbing.php);
        |Sistem|
        :Ambil data pembimbing;
        |Database|
        :Return data pembimbing;
        if (Aksi?) then (Tambah)
            :Isi form tambah pembimbing (tambahPembimbing.php);
            |Sistem|
            :Simpan pembimbing (addPembimbing.php);
            |Database|
            :Insert data pembimbing;
        elseif (Edit) then
            :Update pembimbing (editPembimbing.php);
            |Sistem|
            :Update (updatePembimbing.php);
            |Database|
            :Update data pembimbing;
        elseif (Hapus) then
            :Hapus pembimbing;
            |Sistem|
            :Proses hapus (hapusPembimbing.php);
            |Database|
            :Delete data pembimbing;
        endif
    case (Kelola Akun Admin)
        :Tampilkan list admin (kelola_akun.php);
        |Sistem|
        :Ambil data admin;
        |Database|
        :Return data admin;
        if (Aksi?) then (Tambah)
            :Isi form tambah admin (tambahAdmin.php);
            |Sistem|
            :Simpan admin baru (prosesAddAdmin.php);
            |Database|
            :Insert data admin;
        elseif (Edit) then
            :Update admin (editAdmin.php);
            |Sistem|
            :Update (updateAdmin.php);
            |Database|
            :Update data admin;
        elseif (Hapus) then
            :Hapus admin;
            |Sistem|
            :Proses hapus (hapusAdmin.php);
            |Database|
            :Delete data admin;
        endif
    case (Kelola Berita)
        :Tampilkan list berita (berita/berita.php);
        |Sistem|
        :Ambil data berita;
        |Database|
        :Return data berita;
        if (Aksi?) then (Tambah)
            :Isi form tambah berita (berita/tambahBerita.php);
            |Sistem|
            :Simpan berita;
            |Database|
            :Insert data berita;
        elseif (Edit) then
            :Update berita (berita/editBerita.php);
            |Sistem|
            :Update;
            |Database|
            :Update data berita;
        elseif (Hapus) then
            :Hapus berita (berita/hapusBerita.php);
            |Sistem|
            :Proses hapus;
            |Database|
            :Delete data berita;
        endif
    case (Generate Laporan)
        :Pilih filter laporan (laporan.php);
        |Sistem|
        :Ambil data laporan;
        |Database|
        :Return data laporan;
        :Generate laporan PDF/Excel;
        :Download file;
    case (Generate Bukti Booking)
        :Pilih jamaah;
        |Sistem|
        :Ambil data jamaah;
        |Database|
        :Return data jamaah;
        :Generate bukti booking PDF (generateBuktiBooking.php);
        :Download PDF;
    case (Logout)
        |Sistem|
        :Logout session (logout.php);
    endswitch
else (Tidak)
    :Tampilkan error;
    |Admin|
    :Kembali ke login;
endif

stop

@enduml
