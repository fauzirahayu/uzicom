@startuml Sequence Diagram Login

title Sequence Diagram Login Sistem Manajemen Haji

actor Admin as Admin
actor Pengguna as User
participant "tampilan login" as Index
participant "proses login" as Login
participant "Database" as DB
participant "sideMenu admin" as AdminMenu
participant "sideMenu penguna" as UserMenu

Admin -> Index: Akses halaman login
Index -> Admin: Tampilkan form login

Admin -> Index: Masukkan email dan password
Index -> Login: Kirim POST data (email, password)

Login -> DB: Query SELECT * FROM admin WHERE email=?
DB --> Login: Return admin data

alt Admin login berhasil
    Login -> Login: Verify password dengan password_verify()
    Login -> Login: Set session (id, nama, email, role='admin')
    Login -> AdminMenu: Redirect to sideMenu admin
    AdminMenu --> Admin: Tampilkan dashboard admin
else Admin login gagal
    Login -> Index: Redirect dengan alert "Email atau Password salah!"
end

Login -> DB: Query SELECT * FROM pengguna WHERE email=?
DB --> Login: Return pengguna data

alt Pengguna login berhasil
    Login -> Login: Verify password dengan password_verify()
    Login -> Login: Set session (id, nama, email, role='user')
    Login -> UserMenu: Redirect to pengguna/sideMenu pengguna
    UserMenu --> User: Tampilkan dashboard pengguna
else Pengguna login gagal
    Login -> Index: Redirect dengan alert "Email atau Password salah!"
end

@enduml
